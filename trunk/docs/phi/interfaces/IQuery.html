<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" href="../../style.css" type="text/css" media="screen">
<link rel="stylesheet" href="../../print.css" type="text/css" media="print">
<meta content="IQuery,phi.interfaces.IQuery,connect,execute,arrayInsert,arrayUpdate,getRecords,getRow,getConnection,getLastInsertID,toString,getError" name="keywords">
<title>phi.interfaces.IQuery</title>
</head>
<body>
<script type="text/javascript" language="javascript" src="../../asdoc.js"></script><script type="text/javascript" language="javascript" src="../../cookies.js"></script><script type="text/javascript" language="javascript">
<!--
				asdocTitle = 'IQuery - FlexDB documentation';
				var baseRef = '../../';
				window.onload = configPage;
			--></script>
<table style="display:none" id="titleTable" cellspacing="0" cellpadding="0" class="titleTable">
<tr>
<td align="left" class="titleTableTitle">Flex Database Engine documentation</td><td align="right" class="titleTableTopNav"><a onclick="loadClassListFrame('../../all-classes.html')" href="../../package-summary.html">All&nbsp;Packages</a>&nbsp;|&nbsp;<a onclick="loadClassListFrame('../../all-classes.html')" href="../../class-summary.html">All&nbsp;Classes</a>&nbsp;|&nbsp;<a onclick="loadClassListFrame('../../index-list.html')" href="../../all-index-A.html">Index</a>&nbsp;|&nbsp;<a href="../../index.html?phi/interfaces/IQuery.html&amp;phi/interfaces/class-list.html" id="framesLink1">Frames</a><a onclick="parent.location=document.location" href="" style="display:none" id="noFramesLink1">No&nbsp;Frames</a></td><td rowspan="3" align="right" class="titleTableLogo"><img alt="Adobe Logo" title="Adobe Logo" class="logoImage" src="../../images/logo.jpg"></td>
</tr>
<tr class="titleTableRow2">
<td align="left" id="subTitle" class="titleTableSubTitle">Interface&nbsp;IQuery</td><td align="right" id="subNav" class="titleTableSubNav"><a href="#methodSummary">Methods</a></td>
</tr>
<tr class="titleTableRow3">
<td colspan="2">&nbsp;</td>
</tr>
</table>
<script type="text/javascript" language="javascript">
<!--
if (!isEclipse() || window.name != ECLIPSE_FRAME_NAME) {titleBar_setSubTitle("InterfaceÂ IQuery"); titleBar_setSubNav(false,false,false,false,false,false,true,false,false,false,false,false,false,false);}
--></script>
<div class="MainContent">
<table cellspacing="0" cellpadding="0" class="classHeaderTable">
<tr>
<td class="classHeaderTableLabel">Package</td><td><a onclick="javascript:loadClassListFrame('class-list.html')" href="package-detail.html">phi.interfaces</a></td>
</tr>
<tr>
<td class="classHeaderTableLabel">Interface</td><td class="classSignature">public interface IQuery extends <a href="none">flash.events.IEventDispatcher</a></td>
</tr>
<tr>
<td class="classHeaderTableLabel">Implementors</td><td><a href="../db/Query.html">Query</a></td>
</tr>
</table>
<p></p>
  The interface definition for a <code>Query</code> object.
  
  <P>
  A <code>IQuery</code> implementor have these responsibilities:
  <UL>
  <LI>Execute a SQL statement on a database.</LI>
  <LI>Retrive the result returned by database engine.</LI>
  <LI>Dispatch error event if any error appear.</LI>
  </UL>
  
  <p></p>
<p>
<span class="classHeaderTableLabel">See also</span>
</p>
<div class="seeAlso">phi.db.IDatabase</div>
<br>
<hr>
</div>
<a name="methodSummary"></a>
<div class="summarySection">
<div class="summaryTableTitle">Public Methods</div>
<table id="summaryTableMethod" class="summaryTable " cellpadding="3" cellspacing="0">
<tr>
<th>&nbsp;</th><th colspan="2">Method</th><th class="summaryTableOwnerCol">Defined&nbsp;by</th>
</tr>
<tr class="">
<td class="summaryTablePaddingCol">&nbsp;</td><td class="summaryTableInheritanceCol">&nbsp;</td><td class="summaryTableSignatureCol">
<div class="summarySignature">
<a class="signatureLink" href="#arrayInsert()">arrayInsert</a>(table:String, arr:Array):String</div>
<div class="summaryTableDescription">
   Execute a INSERT query on a table.</div>
</td><td class="summaryTableOwnerCol">IQuery</td>
</tr>
<tr class="">
<td class="summaryTablePaddingCol">&nbsp;</td><td class="summaryTableInheritanceCol">&nbsp;</td><td class="summaryTableSignatureCol">
<div class="summarySignature">
<a class="signatureLink" href="#arrayUpdate()">arrayUpdate</a>(table:String, arr:Array, cond:String):String</div>
<div class="summaryTableDescription">
   Execute a UPDATE query on a table.</div>
</td><td class="summaryTableOwnerCol">IQuery</td>
</tr>
<tr class="">
<td class="summaryTablePaddingCol">&nbsp;</td><td class="summaryTableInheritanceCol">&nbsp;</td><td class="summaryTableSignatureCol">
<div class="summarySignature">
<a class="signatureLink" href="#connect()">connect</a>(connection:String, db:<a href="IDatabase.html">IDatabase</a>):void</div>
<div class="summaryTableDescription">
   This function allow to select the connection you want to
   use for executing a SQL statements.</div>
</td><td class="summaryTableOwnerCol">IQuery</td>
</tr>
<tr class="">
<td class="summaryTablePaddingCol">&nbsp;</td><td class="summaryTableInheritanceCol">&nbsp;</td><td class="summaryTableSignatureCol">
<div class="summarySignature">
<a class="signatureLink" href="#execute()">execute</a>(q:String, option:String = "select"):void</div>
<div class="summaryTableDescription">
   Execte a SQL statement.</div>
</td><td class="summaryTableOwnerCol">IQuery</td>
</tr>
<tr class="">
<td class="summaryTablePaddingCol">&nbsp;</td><td class="summaryTableInheritanceCol">&nbsp;</td><td class="summaryTableSignatureCol">
<div class="summarySignature">
<a class="signatureLink" href="#getConnection()">getConnection</a>():<a href="../db/ConnectionData.html">ConnectionData</a>
</div>
<div class="summaryTableDescription">
   Get the current used connection.</div>
</td><td class="summaryTableOwnerCol">IQuery</td>
</tr>
<tr class="">
<td class="summaryTablePaddingCol">&nbsp;</td><td class="summaryTableInheritanceCol">&nbsp;</td><td class="summaryTableSignatureCol">
<div class="summarySignature">
<a class="signatureLink" href="#getError()">getError</a>():String</div>
<div class="summaryTableDescription">
   Get the last SQL error.</div>
</td><td class="summaryTableOwnerCol">IQuery</td>
</tr>
<tr class="">
<td class="summaryTablePaddingCol">&nbsp;</td><td class="summaryTableInheritanceCol">&nbsp;</td><td class="summaryTableSignatureCol">
<div class="summarySignature">
<a class="signatureLink" href="#getLastInsertID()">getLastInsertID</a>():Number</div>
<div class="summaryTableDescription">
   Get the ID generated for an AUTO_INCREMENT column by the previous INSERT query.</div>
</td><td class="summaryTableOwnerCol">IQuery</td>
</tr>
<tr class="">
<td class="summaryTablePaddingCol">&nbsp;</td><td class="summaryTableInheritanceCol">&nbsp;</td><td class="summaryTableSignatureCol">
<div class="summarySignature">
<a class="signatureLink" href="#getRecords()">getRecords</a>():ArrayCollection</div>
<div class="summaryTableDescription">
   Get the records selected with a previous <code>execute()</code> method.</div>
</td><td class="summaryTableOwnerCol">IQuery</td>
</tr>
<tr class="">
<td class="summaryTablePaddingCol">&nbsp;</td><td class="summaryTableInheritanceCol">&nbsp;</td><td class="summaryTableSignatureCol">
<div class="summarySignature">
<a class="signatureLink" href="#getRow()">getRow</a>():Object</div>
<div class="summaryTableDescription">
   Get the next row from a previous selected records.</div>
</td><td class="summaryTableOwnerCol">IQuery</td>
</tr>
<tr class="">
<td class="summaryTablePaddingCol">&nbsp;</td><td class="summaryTableInheritanceCol">&nbsp;</td><td class="summaryTableSignatureCol">
<div class="summarySignature">
<a class="signatureLink" href="#toString()">toString</a>():String</div>
<div class="summaryTableDescription">
   Return the query.</div>
</td><td class="summaryTableOwnerCol">IQuery</td>
</tr>
</table>
</div>
<script type="text/javascript" language="javascript">
<!--
showHideInherited();
--></script>
<div class="MainContent">
<a name="methodDetail"></a>
<div class="detailSectionHeader">Method detail</div>
<a name="arrayInsert()"></a>
<table cellspacing="0" cellpadding="0" class="detailHeader">
<tr>
<td class="detailHeaderName">arrayInsert</td><td class="detailHeaderParens">()</td><td class="detailHeaderType">method</td>
</tr>
</table>
<div class="detailBody">
<code>public function arrayInsert(table:String, arr:Array):String</code><p>
   Execute a INSERT query on a table.
   
   <P>This function can be used to save data into database. After parsing
   the array this function generate a SQL statement and execute it with
   <code>execute()</code> method.
   
   </p><span class="label">Parameters</span>
<table border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="20px"></td><td><code><span class="label">table</span>:String</code> &mdash; the name of the table
   </td>
</tr>
<tr>
<td class="paramSpacer">&nbsp;</td>
</tr>
<tr>
<td width="20px"></td><td><code><span class="label">arr</span>:Array</code> &mdash; the array that contains the data.
   
   </td>
</tr>
</table>
<p></p>
<span class="label">Returns</span>
<table border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="20"></td><td><code>String</code> &mdash; the SQL generated from array.
   </td>
</tr>
</table>
<br>
<span class="label">Example</span>
<br>Next example insert a new user in database:
   <div class='listing'><pre>
   private functin insertNewUsers(q:IQuery):void
   {
     var arr :Array = new Array();
   
     arr.push({key: fname, value: "pop"});
     arr.push({key: lname, value: "lpopname"});
   
     q.addEventListener(Query.QUERY_END, processQuery);
     q.addEventListener(Query.QUERY_ERROR, processQueryError);
     q.arrayInsert("users", arr);
   }
   
   private function processQuery(evt:Object):void
   {
     ....
   }
   
   private function processQueryError(evt:Object):void
   {
     ...
   }
   </pre></div>
   
   <p></p>
</div>
<a name="arrayUpdate()"></a>
<table cellspacing="0" cellpadding="0" class="detailHeader">
<tr>
<td class="detailHeaderName">arrayUpdate</td><td class="detailHeaderParens">()</td><td class="detailHeaderType">method</td><td class="detailHeaderRule">&nbsp;</td>
</tr>
</table>
<div class="detailBody">
<code>public function arrayUpdate(table:String, arr:Array, cond:String):String</code><p>
   Execute a UPDATE query on a table.
   
   </p><span class="label">Parameters</span>
<table border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="20px"></td><td><code><span class="label">table</span>:String</code></td>
</tr>
<tr>
<td class="paramSpacer">&nbsp;</td>
</tr>
<tr>
<td width="20px"></td><td><code><span class="label">arr</span>:Array</code></td>
</tr>
<tr>
<td class="paramSpacer">&nbsp;</td>
</tr>
<tr>
<td width="20px"></td><td><code><span class="label">cond</span>:String</code></td>
</tr>
</table>
<p></p>
<span class="label">Returns</span>
<table border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="20"></td><td><code>String</code></td>
</tr>
</table>
</div>
<a name="connect()"></a>
<table cellspacing="0" cellpadding="0" class="detailHeader">
<tr>
<td class="detailHeaderName">connect</td><td class="detailHeaderParens">()</td><td class="detailHeaderType">method</td><td class="detailHeaderRule">&nbsp;</td>
</tr>
</table>
<div class="detailBody">
<code>public function connect(connection:String, db:<a href="IDatabase.html">IDatabase</a>):void</code><p>
   This function allow to select the connection you want to
   use for executing a SQL statements. <BR>You must create a connection
   with <code>Database.connect()</code> before using this.
   <P>
   You must select a connection before doing any operations
   with a <code>Query</code> object.
   
   </p><span class="label">Parameters</span>
<table border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="20px"></td><td><code><span class="label">connection</span>:String</code> &mdash; the connection name
   </td>
</tr>
<tr>
<td class="paramSpacer">&nbsp;</td>
</tr>
<tr>
<td width="20px"></td><td><code><span class="label">db</span>:<a href="IDatabase.html">IDatabase</a></code> &mdash; a IDatabase object
   
   </td>
</tr>
</table>
<p>
<span class="label">See also</span>
</p>
<div class="seeAlso">
<a href="../db/Database.html" target="">phi.db.Database</a>
</div>
<br>
<span class="label">Example</span>
<br>The next exemple select the second connection:
   <div class='listing'><pre>
   var db :IDatabase = Database.getInstance();
   var q  :IQuery  = new Query();
   
   db.connect("conn1", "pop", "poppass", "localhost", "yb20");
   db.connect("conn2", "pop", "poppass", "localhost", "test_db");
   
   q.connect("conn2");
   </pre></div>
   
   <p></p>
</div>
<a name="execute()"></a>
<table cellspacing="0" cellpadding="0" class="detailHeader">
<tr>
<td class="detailHeaderName">execute</td><td class="detailHeaderParens">()</td><td class="detailHeaderType">method</td><td class="detailHeaderRule">&nbsp;</td>
</tr>
</table>
<div class="detailBody">
<code>public function execute(q:String, option:String = "select"):void</code><p>
   Execte a SQL statement.
   
   Before executing the SQL statement this function dispatch a Query.QUERY_START
   event and when the SQL statement has finish execution a Query.QUERY_END will be
   dispatched.
   
   </p><span class="label">Parameters</span>
<table border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="20px"></td><td><code><span class="label">q</span>:String</code> &mdash; the SQL string
   </td>
</tr>
<tr>
<td class="paramSpacer">&nbsp;</td>
</tr>
<tr>
<td width="20px"></td><td><code><span class="label">option</span>:String</code> (default = "<code>select</code>")<code></code> &mdash; leave this on default
   
   </td>
</tr>
</table>
<br>
<span class="label">Throws</span>
<table border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="20"></td><td><code></code> &mdash; Error if there are any SQL errors.
   </td>
</tr>
</table>
<br>
<span class="label">Example</span>
<br>Next example will select all users from a users table:
   <div class='listing'><pre>
   var db :IDatabase = Database.getInstance();
   var q  :IQuery  = new Query();
   
   private function connect():void
   {
     db.connect("conn1", "pop", "poppass", "localhost", "test_db");
     q.connect("conn1");
   }
   
   private function getUsers():void
   {
     connect();
   
     q.addEventListener(Query.QUERY_END, onGetUsers);
     q.execute("SELECT fname FROM users WHERE 1");
   }
   
   private function onGetUsers(evt:Object):void
   {
     var q  :IQuery    = evt.target as IQuery;
     var users :ArrayCollection = q.getRecords();
   }
   </pre></div>
   
   <p></p>
</div>
<a name="getConnection()"></a>
<table cellspacing="0" cellpadding="0" class="detailHeader">
<tr>
<td class="detailHeaderName">getConnection</td><td class="detailHeaderParens">()</td><td class="detailHeaderType">method</td><td class="detailHeaderRule">&nbsp;</td>
</tr>
</table>
<div class="detailBody">
<code>public function getConnection():<a href="../db/ConnectionData.html">ConnectionData</a></code><p>
   Get the current used connection.
   
   </p><p></p>
<span class="label">Returns</span>
<table border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="20"></td><td><code><a href="../db/ConnectionData.html">ConnectionData</a></code> &mdash; 
                        the current used connection for execution of SQL statement.
   
                        
                     </td>
</tr>
</table>
</div>
<a name="getError()"></a>
<table cellspacing="0" cellpadding="0" class="detailHeader">
<tr>
<td class="detailHeaderName">getError</td><td class="detailHeaderParens">()</td><td class="detailHeaderType">method</td><td class="detailHeaderRule">&nbsp;</td>
</tr>
</table>
<div class="detailBody">
<code>public function getError():String</code><p>
   Get the last SQL error.
   
   </p><p></p>
<span class="label">Returns</span>
<table border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="20"></td><td><code>String</code> &mdash; the SQL error.
   </td>
</tr>
</table>
</div>
<a name="getLastInsertID()"></a>
<table cellspacing="0" cellpadding="0" class="detailHeader">
<tr>
<td class="detailHeaderName">getLastInsertID</td><td class="detailHeaderParens">()</td><td class="detailHeaderType">method</td><td class="detailHeaderRule">&nbsp;</td>
</tr>
</table>
<div class="detailBody">
<code>public function getLastInsertID():Number</code><p>
   Get the ID generated for an AUTO_INCREMENT column by the previous INSERT query.
   
   </p><p></p>
<span class="label">Returns</span>
<table border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="20"></td><td><code>Number</code> &mdash; the ID generated for an AUTO_INCREMENT
   </td>
</tr>
</table>
</div>
<a name="getRecords()"></a>
<table cellspacing="0" cellpadding="0" class="detailHeader">
<tr>
<td class="detailHeaderName">getRecords</td><td class="detailHeaderParens">()</td><td class="detailHeaderType">method</td><td class="detailHeaderRule">&nbsp;</td>
</tr>
</table>
<div class="detailBody">
<code>public function getRecords():ArrayCollection</code><p>
   Get the records selected with a previous <code>execute()</code> method.
   
   </p><p></p>
<span class="label">Returns</span>
<table border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="20"></td><td><code>ArrayCollection</code> &mdash; a <code>ArrayCollection</code> with all selected records.
   </td>
</tr>
</table>
</div>
<a name="getRow()"></a>
<table cellspacing="0" cellpadding="0" class="detailHeader">
<tr>
<td class="detailHeaderName">getRow</td><td class="detailHeaderParens">()</td><td class="detailHeaderType">method</td><td class="detailHeaderRule">&nbsp;</td>
</tr>
</table>
<div class="detailBody">
<code>public function getRow():Object</code><p>
   Get the next row from a previous selected records.
   
   <P>This function can be used to process the selected records.
   </p><p></p>
<span class="label">Returns</span>
<table border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="20"></td><td><code>Object</code> &mdash; a <code>Object</code> with the row information.
   </td>
</tr>
</table>
<br>
<span class="label">Example</span>
<br>Next example will select all users from a db and add "_process" string to the end on fname
   <div class='listing'><pre>
   ......
   ......
   
   private functin process(q:IQuery):void
   {
     var row :Object = new Object();
     while((row = q.getRow()) != null)
     {
      row.fname += "_process";
     }
   }
   </pre></div>
   
   <p></p>
</div>
<a name="toString()"></a>
<table cellspacing="0" cellpadding="0" class="detailHeader">
<tr>
<td class="detailHeaderName">toString</td><td class="detailHeaderParens">()</td><td class="detailHeaderType">method</td><td class="detailHeaderRule">&nbsp;</td>
</tr>
</table>
<div class="detailBody">
<code>public function toString():String</code><p>
   Return the query.
   
   </p><p></p>
<span class="label">Returns</span>
<table border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="20"></td><td><code>String</code> &mdash; the query.
   </td>
</tr>
</table>
</div>
<br>
<br>
<hr>
<br>
<p></p>
<center class="copyright">Copyright (c) 2007-2008 - phiMento, Inc</center>
</div>
</body>
</html>
<!--Copyright (c) 2007-2008 - phiMento, Inc-->
